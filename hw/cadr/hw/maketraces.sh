#!/bin/sh

(while read line; do
  echo $line
done) <<EOF
<?xml version="1.0"?>
<!-- GTKWave saved traces, version 2.0.0pre5 -->
<!-- at Fri Oct 29 08:33:19 2004 -->

<config>
 <decors>
  <decor name="default">
   <trace-state-colors>
    <named-color name="font" color="#00ff00"/>
    <named-color name="low" color="#00ff00"/>
    <named-color name="high" color="#00ff00"/>
    <named-color name="x" color="#00ff00"/>
    <named-color name="xfill" color="#008000"/>
    <named-color name="trans" color="#00ff00"/>
    <named-color name="mid" color="#00ff00"/>
    <named-color name="vtrans" color="#00ff00"/>
    <named-color name="vbox" color="#00ff00"/>
    <named-color name="unloaded" color="#800000"/>
    <named-color name="analog" color="#00ff00"/>
    <named-color name="clip" color="#ff0000"/>
    <named-color name="req" color="#ff0000"/>
    <named-color name="ack" color="#008000"/>
    <named-color name="hbox" color="#ffffff"/>
   </trace-state-colors>
  </decor>
 </decors>

 <trace-groups>
  <trace-group name="default" decor="default">
  </trace-group>
 </trace-groups>

 <pane-colors>
  <named-color name="back" color="#181818"/>
  <named-color name="grid" color="#808080"/>
  <named-color name="mark" color="#0000ff"/>
  <named-color name="umark" color="#ffff00"/>
  <named-color name="pfont" color="#ffffff"/>
 </pane-colors>

 <markers>
  <marker name="primary" time="0 s"/>
 </markers>

 <traces>
EOF

# check for iverilog
iverilog=0

if  head cadr.vcd | grep -q Icarus ; then
    iverilog=1
fi

(while read -r signalname; do
#
#iverilog
   if [ $iverilog == "1" ]; then
     if [ "${signalname:0:1}" == "\\" ]; then
        signalname=${signalname:1}
     fi
  fi
  if [ "$signalname" == "---" ]; then
      echo '  <separator name="">'
      echo '  </separator>'
  else
      signalname="test.cpu.$signalname"
      echo '  <trace name="'$signalname'" mode="oct" rjustified="yes">'
      echo '    <signal name="'$signalname'"/>'
      echo '  </trace>'
  fi
done) <<EOF
SSPEED0
SSPEED1
TPCLK
\-TPR0
TPWP
CYCLECOMPLETED
---
RESET
\-POWER_RESET
\-BOOT1
\-BOOT2
internal4
---
pc[13:0]
lpc[13:0]
ir[48:0]
ob[31:0]
l[31:0]
ibus[48:0]
iob[47:0]
madr[4:0]
aadr[9:0]
mmem[31:0]
amem[31:0]
a[31:0]
m[31:0]
mf[31:0]
md_n[31:0]
mds_n[31:0]
alu[31:0]
TPCLK
TPWP
MDCLK
---
DESTMDR
\-CLK2C
LOADMD
MDSELB
---
\-DESTMEM
\-IR22
DESTM
IR23
DEST
\-IR25
---
JCOND
N
PCS0
PCS1
---
\-AWPA
\-MWPA
---
NOP
\-IRALU
\-IRJUMP
\-IRDISP
\-IRBYTE
EOF

echo " </traces>"
echo "</config>"
exit 0

wadr[9:0]
wadr_cmpa[5:0]
wadr_cmpb[5:0]
---
DESTMD
DESTM
\-DESTIMOD1
\-DESTIMOD0
---
\-SPCDRIVE
\-PDLDRIVE
\-MPASSM
\-MFDRIVE
---
\-MAPDRIVE
\-VMADRIVE
\-QDRIVE
\-PPDRIVE
\-OPCDRIVE
\-MPASSL
\-MDDRIVE
\-LCDRIVE
---

---
\-IRALU
\-IRJUMP
\-IRDISP
\-IRBYTE
\-FUNCT3
\-FUNCT2
\-FUNCT1
\-FUNCT0
---
IR48
\-DESTIMOD1
CLK3A
I48
I47
I46
I45
I44
I43
I42
I41
I40
---
IR8
IR7
IR6
IR5
IR4
IR3
IR2
IR1
IR0
---
L3
A3
APASSENB
---
ALUSUB
\-MULNOP
internal36
internal37
\-IRJUMP
---
CLK4B
NPC0
NPC1
NPC2
NPC3
---
\-CLOCK_RESET_A
\-BOOT
SRUN
HI1
MCLK5A
\BOOT.TRAP
---
ALUF3B
ALUF2B
ALUF1B
ALUF0B
\-CIN0
ALUMODE
ALU0
ALU1
ALU2
ALU3
---
JCOND
\-JCOND
\PGF.OR.INT.OR.SB
\PGF.OR.INT
\-VMAOK
A
ALU32
ALUNEG
R0
CONDS2
CONDS1
CONDS0
---
PCS1
HI4
\-JCOND
JFALSE
JCOND
\-IR6
IRJUMP
\-IGNPOPJ
POPJ
\-DP
DR
DISPENB
---
PCS0
HI4
\-DFALL
DISPENB
\-JCOND
JRETF
POPJ
JCOND
\-IR6
JRET
---
CLK3E
\-AMEMENB
A0
AMEM0
CYCLECOMPLETED
\-TPDONE
TPWP
---
\-IRBYTE
\-MR
\-SR
MSKR4
MSKR3
MSKR2
MSKR1
MSKR0
S4
S3A
S2A
S1
S0
---
DESTMDR
\-CLK2C
LOADMD
MDCLK
---
\-MFDRIVE
MF0
\-MDDRIVE
\-MD0
\-QDRIVE
Q0
\-MPASSM
\-SPCDRIVE
\-PDLDRIVE
MMEM0
M0
---
\-PWPC
WP4A
PDLWRITED
PDLWRITE
CLK4F
PDLWRITE
\-DESTPDLTOP
\-DESTPDL(X)
\-DESTPDL(P)
---
IR23
\-IR22
IR21
IR20
IR19
DESTM
\-DESTIMOD1
\-DESTIMOD0
\-DESTSPC
\-DESTPDLP
\-DESTPDLX
\-DESTPDL(X)
\-DESTPDL(P)
\-DESTPDLTOP
---
\-TRAP
NOP
\-INOP
\-NOP11
N
---
internal32
IWRITED
HI4
---
DN
DISPENB
---
IR7
\-JCOND
JFALSE
---
IR7
JCOND
\-IR6
IRJUMP
---
NOP
IR43
IR44
\-IRALU
\-IRJUMP
\-IRDISP
\-IRBYTE
---
md[31:0]
m[31:0]
a[31:0]
---
\-TPCLK
\-TPR0
\-TPR40
MACHRUN
\-TPDONE
TPWP
CYCLECOMPLETED
---
\-TPCLK
TPCLK
\-TPREND
TPREND
\-CLOCK_RESET_B
\-TPR0
---
A
pc[13:0]
---
madr[4:0]
aadr[9:0]
---
L0
OB0
CLK3F
---
AMEM0
A0
CLK3
\-AMEMENB
\-AWPA
WP3A
DESTD
DEST
\-MWPA
WP4A
DESTMD
DESTM
CYCLECOMPLETED
---
IR25
IR23
IR22
IR21
IR20
IR19
---
IR18
IR17
IR16
IR15
IR14
---
CLK3
WADR0
IR32
\-AADR0B
WADR1
IR33
\-AADR1B
WADR2
IR34
\-AADR2B
WADR3
IR35
\-AADR3B
---

------------------------------------------------------------------
\-TRAP
internal17
\BOOT.TRAP
\-PARERR
\-TRAPENB
---
\-PARERR
MDPARERR
MDHASPAR
\USE.MD
\-WAIT
---
CYCLECOMPLETED
,internal11
---
\-TPR0
\-TPREND
\-TPDONE
\-CLOCK_RESET_B
\-TPCLK
\-HANG
\-ILONG
---
CYCLECOMPLETED
internal11
internal12
\-TPR40
internal12
\-CLOCK_RESET_B
\-TPDONE
internal11
---
\-MWPA
DESTMD
WP4B
TPWP
internal7
TPWPIRAM
internal8
\-CLOCK_RESET_B
\-TPW70
internal10
\-TPW30
\-TPW45
\-CLOCK_RESET_B
internal9
\-TPREND
TPREND
---
\-CLOCK_RESET_B
\-TPDONE
TPCLK
\-WP1
\-TPW70
\-TPW30
\-TPR0
\-TPR40
\-TPR100
\-TPR160
\-TPCLK
\-TPREND
---
ALUF3A
ALUF2A
ALUF1A
ALUF0A
\-CIN28
ALUMODE
ALU28
ALU29
ALU30
ALU31
A
XOUT31
YOUT31
A31B
A30
A29
A28
M31B
M30
M29
M28
---
ALU31
ALU30
ALU29
ALU28
Q27
ALU0
QS0
QS1
CLK2B
Q31
Q30
Q29
Q28
---
\-PFW
MF31
\-MAPDRIVE
\-VMA31
\-VMADRIVE
Q31
\-QDRIVE
\-ZERO16.DRIVE
L31
\-MPASSL
\-MD31
\-MDDRIVE
NEEDFETCH
\-LCDRIVE
---
\-MFDRIVE
MF31
M31
\-MPASSM
MMEM31
CLK4A
\-PDLDRIVE
PDL31
\-SPCDRIVE
---
HI4
\PGF.OR.INT.OR.SB
\PGF.OR.INT
\-VMAOK
A
ALU32
ALUNEG
R0
JCOND
\-JCOND
CONDS2
CONDS1
CONDS0
---
L0
L1
MMEM0
MMEM1
\-MWPB
\-MADR4B
\-MADR3B
\-MADR2B
\-MADR1B
\-MADR0B
---
IR45
IOB45
I45
\-DESTIMOD1
CLK3A
---
i_ALU1_2A08.AEB
i_ALU1_2B08.AEB
i_ALU1_2A13.AEB
i_ALU1_2B13.AEB
i_ALU0_2A23.AEB
i_ALU0_2B23.AEB
i_ALU0_2A28.AEB
i_ALU0_2B28.AEB
ALU31
ALU29
ALU28
ALU27
ALU26
ALU25
ALU24
ALU23
ALU22
ALU21
ALU20
ALU19
ALU18
ALU17
ALU16
ALU15
ALU14
ALU13
ALU12
ALU11
ALU10
ALU9
ALU8
ALU7
ALU6
ALU5
ALU4
ALU3
ALU2
ALU1
ALU0
---
A
XOUT31
YOUT31
\-CIN28
\-CIN24
\-CIN20
\-CIN16
\-CIN12
\-CIN8
\-CIN4
\-CIN0
ALUF3A
ALUF2A
ALUF1A
ALUF0A
ALUMODE
---
M31B
M30
M29
M28
M27
M26
M25
M24
M23
M22
M21
M20
M19
M18
M17
M16
M15
M14
M13
M12
M11
M10
M9
M8
M7
M6
M5
M4
M3
M2
M1
M0
A31B
A30
A29
A28
A27
A26
A25
A24
A23
A22
A21
A20
A19
A18
A17
A16
A15
A14
A13
A12
A11
A10
A9
A8
A7
A6
A5
A4
A3
A2
A1
A0
---
TRAPB
\-TRAP
PCS0
PCS1
IPC1
DPC1
IR13
SPC1A
SPC0
IR12
DPC0
IPC0
NPC1
NPC0
---
OB19
ALU18
ALU20
ALU19
R19
A19
OSEL1A
OSEL0A
MSK19
---
ALU19
R19
A19
OB19
OSEL1A
OSEL0A
MSK19
ALU18
ALU2
---
SPC0
SPCW0
SPCWPASS
---
SPCO0
i_SPCLCH_4F20.O7
CLK4D
\-SPCPASS
---
\-SWPB
SPCW0
SPCW1
SPCO0
SPCO1
SPCPTR4
SPCPTR3
SPCPTR2
SPCPTR1
SPCPTR0
---
A16
M16
ALUF3A
ALUF2A
ALUF1A
ALUF0A
\-CIN16
ALUMODE
ALU16
ALU17
ALU18
ALU19
A
XOUT19
YOUT19
A19
M19
A18
M18
A17
M17
---
ALU2
ALU4
ALU3
R3
A3
OSEL1A
OSEL0A
MSK3
OB3
---
------------------------------------------------------------
---
M29
M30
M31
M3
M1
M2
M0
S1
S0
SA3
SA2
SA1
SA0
---
SA20
SA24
SA28
SA12
SA8
SA4
SA0
S3A
S2A
S4
R12
R8
R4
R0
---
i_SHIFT0_2E27.O0
i_SHIFT0_2E26.O0
---
M31B
M30
M29
M28
M27
M26
M25
M24
M23
M22
M21
M20
M19
M18
M17
M16
M15
M14
M13
M12
M11
M10
M9
M8
M7
M6
M5
M4
M3
M2
M1
M0
A31B
A30
A29
A28
A27
A26
A25
A24
A23
A22
A21
A20
A19
A18
A17
A16
A15
A14
A13
A12
A11
A10
A9
A8
A7
A6
A5
A4
A3
A2
A1
A0
---

----------------------------------------------------------------
IR5
IR6
IR7
IR8
MSKR0
MSKR1
MSKR2
MSKR3
MSKL0
MSKL1
MSKL2
MSKL3
MSKL3CRY
---
MSKL0
MSKL1
MSKL2
MSKL3
MSKL4
MSK0
MSK1
MSK2
MSK3

-----------------------------------------
\-HANG
\RD.IN.PROGRESS
\USE.MD
\-CLK3G
HI11
MCLK1A
\SET.RD.IN.PROGRESS
\-RDFINISH
\-SRCMD
NOPA
CLK3
\-CLK0
\-TPCLK
MACHRUN
SSTEP
\-SSDONE
SRUN
\-ERRHALT
\-WAIT
\-STATHALT
HI4
\MBUSY.SYNC
DESTMEM
\-MEMGRANT
MBUSY
\USE.MD
\-WAIT
\MBUSY.SYNC
NEEDFETCH
LCINC
\NEXT.INSTRD
---
A
ALU32
ALUNEG
R0
JCOND
\-JCOND
GND
CONDS2
CONDS1
CONDS0
HI4
\PGF.OR.INT.OR.SB
\PGF.OR.INT
\-VMAOK
---
A
\-ALU32
\-PFR
\-PFW
\-LVMO23
\-LVMO22
\-VMO23
\-VMO22
WRCYC
MEMSTART
---
\-RESET
MEMSTART
\-MEMSTART
MEMPREPARE
MCLK1A
\-MEMOP
CLK2C
\-MEMRD
\-MEMWR
\-IFETCH
---
\-PROMCE0
\-PROMENABLE
PC9
\BOTTOM.1K
\-IDEBUG
\-PROMDISABLED
\-IWRITEDA
---
i_IRAM33_2A29.DO
i_IRAM32_2A24.DO
i_IRAM31_2A19.DO
i_IRAM30_2A14.DO
i_PROM1_1B20.D6
i_PROM0_1B19.D6
i_DEBUG_1F15.O0
---
i_IRAM33_2A28.DO
i_IRAM32_2A23.DO
i_IRAM31_2A18.DO
i_IRAM30_2A13.DO
i_PCTL_1A16.AOUT0
i_DEBUG_1F15.O1
---

------------------------------------------------------------------
SSTEP
\-SSDONE
SRUN
\-ERRHALT
\-WAIT
\-STATHALT
MACHRUN
RUN
---
HI4
\MBUSY.SYNC
DESTMEM
\-MEMGRANT
MBUSY
\USE.MD
\-WAIT
\MBUSY.SYNC
NEEDFETCH
LCINC
---
MEMRQ
\-MBUSY.SYNC
\MBUSY.SYNC
MCLK1A
---
MEMRQ
MBUSY
MEMSTART
\-PFR
\-PFW
HI11
---
MEMSTART
\-RESET
\-MEMSTART
MEMPREPARE
MCLK1A
---
MEMPREPARE
\-MEMOP
CLK2C
---
\-MEMOP
\-MEMRD
\-MEMWR
\-IFETCH
---
\-IFETCH
NEEDFETCH
LCINC
---
LCINC
\-RESET
CLK3C
\NEXT.INSTR
\NEXT.INSTRD
\-SPOP
internal28
internal29
IRDISP
IR24
---
\NEXT.INSTRD
---
\-CLOCK_RESET_A
SPY0
\-LDCLK
\-BOOT
RUN
\-RUN
---
internal2
\PROG.BOOT
LDMODE
SPY7
\-BOOT
SRUN
HI1
MCLK5A
\-CLOCK_RESET_A
nc75
\BOOT.TRAP

---------------------------------------------
A31A
M31B
ALUF3A
ALUF2A
ALUF1A
ALUF0A
\-CIN32
ALUMODE
ALU32
---
L31
L27
\-APASSENB
A31A
\-AMEMENB
CLK3E
---
M31B
M31
HI12
\-SPCDRIVE
\-PDLDRIVE
\-MPASSM
\-MFDRIVE
MMEM31
---
R0
\-S4
S2A
S3A
SA4
SA8
SA12
SA16
SA20
SA24
SA28
---
SA20
SA24
SA28
SA0
SA4
SA8
SA12
S3A
S2A
R12
R8
S4
R4
R0
---
M29
M30
M31
M0
M1
M2
M3
S1
S0
SA3
SA2
SA1
SA0
---
\-MPASSM
TSE4A
\-IR31
\-MPASS
MFDRIVE
\-TSE1
MFENB
---
\-SPCDRIVE
\-PDLDRIVE
\-MPASSM
\-MFDRIVE
MFDRIVE
CLK4A
CLK4C
MMEM0
M0
MF0
i_MLATCH_4A05.O7
i_SPCLCH_4A10.O7
i_PLATCH_4A04.O7
i_MF_1A25.BOUT3
---
MF0
LCDRIVE
\-MDDRIVE
MPASSL
\-OPCDRIVE
DCDRIVE
\-PPDRIVE
PIDRIVE
QDRIVE
\-VMADRIVE
\-MAPDRIVE
---
DC0
OPC0
PDLIDX0
Q0
---
i_VMEMDR_1A13.BOUT3
i_VMA_1A10.BOUT3
i_QCTL_1E12.BOUT3
i_PDLPTR_4C01.BOUT3
i_PDLPTR_4C01.AOUT3
i_OPCD_1E03.BOUT3
i_OPCD_1E03.AOUT3
i_MLATCH_4A08.BOUT3
i_MD_1A05.BOUT3
i_LC_1A20.BOUT3
---
QDRIVE
SRCQ
TSE2
---
PIDRIVE
TSE4B
SRCPDLIDX

-------------------------------------------------------------------
internal29
IRDISP
IR24
CLK3C
\NEXT.INSTR
\-SPOP
internal28
\-SRCSPCPOPREAL
SPC14
\-JCOND
JRETF
JCOND
\-IR6
\-IGNPOPJ
internal31
DP
DR
DISPENB
JRET
\-IR8
IRJUMP
IR9
---
NOP
\-TRAP
\-NOPA
---
\-TRAP
internal17
\BOOT.TRAP
\-PARERR
\-TRAPENB
---
\-CLOCK_RESET_A
\-BOOT
SRUN
RUN
\-RUN
\BOOT.TRAP

---------------------------------------------------------------------
IR43
IR44
\-INOP
\-NOP11
N
internal32
IR7
DN
DISPENB
IR7
\-JCOND
JFALSE
HI4
IWRITED
JCOND
\-IR6
IRJUMP
---
A
ALU32
ALUNEG
R0
JCOND
\-JCOND
CONDS2
CONDS1
CONDS0
HI4
\PGF.OR.INT.OR.SB
\PGF.OR.INT
\-VMAOK
---
A
\-ALU32
\-PFR
\-PFW
\-LVMO23
\-LVMO22
\-VMO23
\-VMO22
WRCYC
MEMSTART
---
A31A
M31B
ALUF3A
ALUF2A
ALUF1A
ALUF0A
\-CIN32
ALUMODE
ALU32
---
\-ALUF3
---
ALUSUB
\-MULNOP
internal36
internal37
\-IRJUMP
---
ALUADD
\-MUL
HI12
Q0
---
\-NOP11
\-INOP
NOP
IR43
IR44
\-IRALU
\-IRJUMP
\-IRDISP
\-IRBYTE
\-FUNCT3
\-FUNCT2
\-FUNCT1
\-FUNCT0
IR11
IR10
NOP

----------------------------------------------------------------
\-POWER_RESET
\-CLOCK_RESET_A
\-CLOCK_RESET_B
POWER_RESET_A
\-BUSINT.LM.RESET
\PROG.BOOT
\-BOOT
\-PROG.RESET
\-BUS.RESET
\PROG.BUS.RESET

CLK1
CLK2
CLK3
\-CLK0
TPCLK
MACHRUN
\-SSDONE
SSTEP
SRUN
\-ERRHALT
\-WAIT
\-STATHALT
\-PROMENABLE
\-PROMDISABLED
PROMDISABLE
PROMDISABLED
PROMENABLE
STEP
\-TPDONE

